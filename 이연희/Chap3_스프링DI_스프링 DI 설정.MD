# ìŠ¤í”„ë§ì˜ DI ì„¤ì •
## â—ìŠ¤í”„ë§ì„ ì´ìš©í•œ ê°ì²´ ì¡°ë¦½

ìŠ¤í”„ë§ì€ Assembler í´ë˜ìŠ¤ì˜ ìƒì„±ì ì½”ë“œì²˜ëŸ¼ í•„ìš”í•œ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ìƒì„±í•œ ê°ì²´ì— ì˜ì¡´ì„ ì£¼ì…í•œë‹¤. ìŠ¤í”„ë§ì€ Assembler#getMemberRegisterService() ë©”ì„œë“œì²˜ëŸ¼ ê°ì²´ë¥¼ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì„ ì •ì˜í•˜ê³  ìˆë‹¤. ì°¨ì´ì ì€ AssemblerëŠ” MemberRegisterServiceë‚˜ MemberDaoì™€ ê°™ì´ íŠ¹ì • íƒ€ì…ì˜ í´ë˜ìŠ¤ë§Œ ìƒì„±í•œ ë°˜ë©´ **ìŠ¤í”„ë§ì€ ë²”ìš© ì¡°ë¦½ê¸°**ë¼ëŠ” ì ì´ë‹¤. 

ìŠ¤í”„ë§ì„ ì‚¬ìš©í•˜ë ¤ë©´ ìŠ¤í”„ë§ì´ ì–´ë–¤ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì˜ì¡´ì„ ì–´ë–»ê²Œ ì£¼ì…í• ì§€ ì •ì˜í•œ ì„¤ì • ì •ë³´ë¥¼ ì‘ì„±í•´ì•¼ í•œë‹¤. 
#### ì„¤ì • ì •ë³´
```java
package config;
@Configuration
public class AppCtx{
	@Bean
    public MemberDao memberDao(){
    	return new MemberDao();
    }
    @Bean
    public MemberRegisterService memberRegSvc(){
    	//memberDao()ê°€ ìƒì„±í•œ ê°ì²´ë¥¼ MemberRegisterService ìƒì„±ìë¥¼ í†µí•´ ì£¼ì…í•œë‹¤.
    	return new MebmerReigsterService(memberDao());
    }
    @Bean
    public ChangePasswordService changePwdSvc(){
    	ChangePasswordService pwdSvc = new ChangePasswordService();
        //setMemberDao() ë©”ì„œë“œë¥¼ í†µí•´ ì˜ì¡´ ê°ì²´ë¥¼ ì£¼ì…í•œë‹¤.
        pwdSvc.setMemberDao(memberDao());
        return pwdSvc;
    }
}
```
- @Configuration: ìŠ¤í”„ë§ ì„¤ì • í´ë˜ìŠ¤ë¥¼ ì˜ë¯¸í•œë‹¤. 
- @Bean: í•´ë‹¹ ë©”ì„œë“œê°€ ìƒì„±í•œ ê°ì²´ë¥¼ ìŠ¤í”„ë§ ë¹ˆì´ë¼ê³  ì„¤ì •í•œë‹¤. ê°ê°ì˜ ë©”ì„œë“œë§ˆë‹¤ í•œ ê°œì˜ ë¹ˆ ê°ì²´ë¥¼ ìƒì„±í•œë‹¤. ì´ë•Œ ë©”ì„œë“œ ì´ë¦„ì€ ë¹ˆ ê°ì²´ì˜ ì´ë¦„ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤. memberDao() ë©”ì„œë“œë¥¼ ì´ìš©í•´ì„œ ìƒì„±í•œ ë¹ˆ ê°ì²´ëŠ” "memberDao"ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ìŠ¤í”„ë§ì— ë“±ë¡ëœë‹¤. 


**ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì˜ì¡´ ê°ì²´ë¥¼ ì£¼ì…í•˜ëŠ” ê²ƒì€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì´ë‹¤.** ë”°ë¼ì„œ ì„¤ì • í´ë˜ìŠ¤ë¥¼ ì´ìš”í•´ì„œ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•´ì•¼ í•œë‹¤.
#### ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±
```java
ApplicationContext ctx = new AnnotationConfigApplicationContext(AppCtx.class);
```
ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•˜ë©´ **getBean()**ë©”ì„œë“œë¥¼ ì´ìš©í•´ì„œ ì‚¬ìš©í•  ê°ì²´ë¥¼ êµ¬í•  ìˆ˜ ìˆë‹¤. ì•„ë˜ ì½”ë“œëŠ” ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ctxë¡œ ë¶€í„° ì´ë¦„ì´ "memberRegSvc"ì¸ ë¹ˆ ê°ì²´ë¥¼ êµ¬í•œë‹¤.
```java
MemberRegisterService regScv = ctx.getBean("memberRegSvc",MemberRegisterService.class);
```

#### MainForSpring
```java
package main;
public class MainForSpring{
	private static ApplicationContest ctx = null;
    public static void main(String[] args) throws IOException{
    	ctx = new AnnotationConfigApplicationContext(AppCtx.class);
        ...
    }
    private static void processNewConmmand(String[] arg){
    	...
        MemberRegisterSerivce regSvc = ctx.getBean("mebmerRegSvc",MemberRegisterService.class);
        ...
    }
    private static void processChangeCommand(String[] arg){
    	ChangePasswordService changePwdSvc = ctx.getBean("changePwdSvc",ChangePasswordService.class);
    }
}
```
MainForSpring í´ë˜ì„œê°€ MainForAssembler í´ë˜ìŠ¤ì™€ ë‹¤ë¥¸ ì ì€ Assembler í´ë˜ìŠ¤ ëŒ€ì‹  **ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì¸ ApplicationContextë¥¼ ì‚¬ìš©í–ˆë‹¤ëŠ” ê²ƒì´ë‹¤.**

## â— DI ë°©ì‹
### 1. ìƒì„±ì ë°©ì‹

```java
public class MemberRegisterServcie{
	private MemberDao memberDao;
    public MemberRegisterServcie(MemberDao memberDao){
    	this.memberDao = memberDao;
    }
}
```
ìƒì„±ìë¥¼ ì´ìš©í•´ì„œ ì˜ì¡´ ê°ì²´ë¥¼ ì£¼ì…í•˜ê¸° ìœ„í•´ í•´ë‹¹ ì„¤ì •ì„ ë‹´ì€ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œë‹¤.
```java
@Bean
public MemberDao memberDao(){
	return new MemberDao();
}
@Bean
public MemberRegisterServcie memberRegSvc(){
	return new MemberRegisterServcie(memberDao());
}
```
ìƒì„±ìì— ì „ë‹¬í•œ ì˜ì¡´ ê°ì²´ê°€ ë‘ ê°œ ì´ìƒì´ì–´ë„ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ì£¼ì…í•˜ë©´ ëœë‹¤. MemberDao í´ë˜ìŠ¤ì˜ selectAll() ë©”ì„œë“œë¥¼ ì¶”ê°€í•œë‹¤.
```java
public class MemberDao{
	public Collection<Member> selectAll(){
    	return map.values();
    }
}
```

### 2. setter ë©”ì„œë“œ ë°©ì‹
ì§€ì •í•œ ì´ë©”ì¼ì„ ê°–ëŠ” Memberë¥¼ ì°¾ì•„ì„œ ì •ë³´ë¥¼ ì½˜ì†”ì— ì¶œë ¥í•˜ëŠ” í´ë˜ìŠ¤ì´ë‹¤.
```java
public class MemberInfoPrinter{
	private MemberDao memberDao;
    private MemberPrinter printer;
    public void printMemberInfoPrinter(String email){
    	Member member = memberDao.selectByEmail(email);
        if (member==null){
        	System.out.print("No Data\n");
            return;
        }
        printer.print(member);
        System.out.println();
    }
    //memberDao íƒ€ì…ì˜ ê°ì²´ ì˜ì¡´ ì£¼ì…
    public void setMemberDao(MemberDao memberDao){
    	this.memberDao = memberDao;
    }		
    //MemberPrinter íƒ€ì…ì˜ ê°ì²´ ì˜ì¡´ ì£¼ì…
    public void setPrinter(MemberPrinter printer){
    	this.printer = printer;
    }
}	
```

setter ë©”ì„œë“œë¥¼ ì´ìš©í•´ì„œ ì˜ì¡´ì„ ì£¼ì…í•˜ëŠ” ì„¤ì • ì½”ë“œë¥¼ AppCtx í´ë˜ìŠ¤ì— ì¶”ê°€í•œë‹¤.
```java
@Configuration
public class AppCtx{
	...
    @Bean
    public MemberInfoPrinter infoPrinter(){
    	MemberInfoPrinter infoPrinter = new MemberInfoPrinter();
        infoPrinter.setMebmerDao(memberDao());
        infoPrinter.setPrinter(mebmerPrinter());
        return infoPrinter;
    }
}	
```

### ğŸ”» ìƒì„±ì vs setter ë©”ì„œë“œ
1. **ìƒì„±ì ë°©ì‹**: ë¹ˆ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ì‹œì ì— ëª¨ë“  ì˜ì¡´ ê°ì²´ê°€ ì£¼ì…ëœë‹¤.
	ğŸ”¹ **ì¥ì **
    ë¹ˆ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ì‹œì ì— í•„ìš”í•œ ëª¨ë“  ì˜ì¡´ ê°ì²´ë¥¼ ì£¼ì…ë°›ê¸° ë•Œë¬¸ì— ê°ì²´ë¥¼ ì‚¬ìš©í•  ë•Œ ì™„ì „í•œ ìƒíƒœë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. 
    ğŸ”¸ **ë‹¨ì **
    ìƒì„±ìì˜ íŒŒë¼ë¯¸í„°ê°€ ë§ì„ ê²½ìš° ê° ì¸ìê°€ ì–´ë–¤ ì˜ì¡´ ê°ì²´ë¥¼ ì„¤ì •í•˜ëŠ”ì§€ ì•Œì•„ë‚´ë ¤ë©´ ìƒì„±ìì˜ ì½”ë“œë¥¼ í™•ì¸í•´ì•¼ í•œë‹¤.
    
2. **setter ë©”ì„œë“œ ë°©ì‹**: setter ë©”ì„œë“œ ì´ë¦„ì„ í†µí•´ ì–´ë–¤ ì˜ì¡´ ê°ì²´ê°€ ì£¼ì…ë˜ëŠ”ì§€ ì•Œ ìˆ˜ ìˆë‹¤. 
	ğŸ”¹ **ì¥ì **
    ë©”ì„œë“œ ì´ë¦„ë§Œìœ¼ë¡œë„ ì–´ë–¤ ì˜ì¡´ ê°ì²´ë¥¼ ì„¤ì •í•˜ëŠ”ì§€ ì‰½ê²Œ ìœ ì¶”í•  ìˆ˜ ìˆë‹¤. 
    ğŸ”¸ **ë‹¨ì **
    setter ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ì„œ í•„ìš”í•œ ì˜ì¡´ ê°ì²´ë¥¼ ì „ë‹¬í•˜ì§€ ì•Šì•„ë„ ë¹ˆ ê°ì²´ê°€ ìƒì„±ë˜ê¸° ë•Œë¬¸ì— ê°ì²´ë¥¼ ì‚¬ìš©í•˜ëŠ” ì‹œì ì— NullPointerExceptionì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤. 
    
    
### 3. ê¸°ë³¸ ë°ì´í„° íƒ€ì… ê°’ ì„¤ì •
```java
public class VersionPrinter{
	private int majorVersion;
    private int minorVersion;
   	public void print(){
    	System.out.printf("This program version is %d.%d\n",majorVersion,minorVersion);
    }
    public void setMajorVersion(int majorVersion){
    	this.majorVersion = majorVersion;
    }
    public void setMinorVersion(int minorVersion){
    	this.minorVersion = minorVersion;
    }
}
```
```java
@Configuration AppCtx{
	...
    @Bean
    public VersionPrinter versionPrinter(){
    	VersionPrinter versionPrinter = new VersionPrinter();
        versionPrinter.setMajorVersion(5);
        versionPrinter.setMinorVersion(0);
        return versionPrinter;
    }
}
```
int,longê³¼ ê°™ì€ ê¸°ë³¸ ë°ì´í„° íƒ€ì…ê³¼ String íƒ€ì…ì˜ ê°’ì€ ì¼ë°˜ ì½”ë“œì²˜ëŸ¼ ê°’ì„ ì„¤ì •í•˜ë©´ ëœë‹¤. 