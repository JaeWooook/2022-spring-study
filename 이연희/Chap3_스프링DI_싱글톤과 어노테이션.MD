# Dependency Injection - μ‹±κΈ€ν†¤κ³Ό μ–΄λ…Έν…μ΄μ…
## μ‹±κΈ€ν†¤
#### μ„¤μ • μ •λ³΄ AppCtx class
```java
@Configuration
public class AppCtx{
	@Bean
    public MemberDao memberDao(){
    	return new MemberDao();
    }
    @Bean
    public MemberRegisterService memberRegSvc(){
    	return new MemberRegisterService(memberDao());
    }
    @Bean
    public ChangePasswordService changePwdSvc(){
		ChangePasswordService pwdSvc = new ChangePasswordService();
        pwdSvc.setMemberDao(memberDao());
        return pwdSvc;
	}
}
```
**Q**β“ memberDao()κ°€ μƒλ΅μ΄ MemberDao κ°μ²΄λ¥Ό μƒμ„±ν•΄μ„ λ¦¬ν„΄ν•λ―€λ΅ memberRegSvc()μ—μ„ μƒμ„±ν• MemberRegisterService κ°μ²΄μ™€ changePwdSvc()μ—μ„ μƒμ„±ν• ChangePasswordService κ°μ²΄λ” μ„λ΅ λ‹¤λ¥Έ MemberDao κ°μ²΄λ¥Ό μ‚¬μ©ν•λ” κ²ƒμ΄ μ•„λ‹κ°€?

**A**π’΅ μ¤ν”„λ§ μ»¨ν…μ΄λ„λ” μ‹±κΈ€ν†¤ κ°μ²΄μ΄λ‹¤. μ¤ν”„λ§ μ»¨ν…μ΄λ„λ” @Beanμ΄ λ¶™μ€ λ©”μ„λ“μ— λ€ν•΄ **ν• κ°μ κ°μ²΄λ§ μƒμ„±ν•λ‹¤. μ΄λ” λ‹¤λ¥Έ μ„¤μ • λ©”μ„λ“μ— μν•΄ memberDao()λ¥Ό λ‡ λ² νΈμ¶ν•λ”λΌλ„ ν•­μƒ κ°™μ€ κ°μ²΄λ¥Ό λ¦¬ν„΄ν•¨μ„ μλ―Έν•λ‹¤.**
μ¤ν”„λ§μ΄ λ°νƒ€μ„μ— μƒμ„±ν• μ„¤μ • ν΄λμ¤μ memberDao() λ©”μ„λ“λ” λ§¤λ² μƒλ΅μ΄ κ°μ²΄λ¥Ό μƒμ„±ν•μ§€ μ•λ”λ‹¤. λ€μ‹  ν• λ² μƒμ„±ν• κ°μ²΄λ¥Ό λ³΄κ΄€ν–λ‹¤κ°€ μ΄ν›„μ—λ” λ™μΌν• κ°μ²΄λ¥Ό λ¦¬ν„΄ν•λ‹¤.
 
## @Autowired Annotation
@Autowiredλ” μ¤ν”„λ§μ μλ™ μ£Όμ… κΈ°λ¥μ„ μ„ν• μ–΄λ…Έν…μ΄μ…μ΄λ‹¤. μ΄ μ„¤μ •μ€ μμ΅΄ μ£Όμ…κ³Ό κ΄€λ ¨μ΄ μλ‹¤. μ¤ν”„λ§ μ„¤μ • ν΄λμ¤ ν•„λ“μ— @Autowiredλ¥Ό λ¶™μ΄λ©΄ ν•΄λ‹Ή νƒ€μ…μ λΉμ„ μ°Ύμ•„μ„ ν•„λ“μ— ν• λ‹Ήν•λ‹¤. 
```java
@Autowired
private MemberDao memberDao;
```
λ‹¤λ¥Έ μ„¤μ • νμΌμ— μ •μν• λΉμ„ ν•„λ“μ— ν• λ‹Ήν–μΌλ©΄ μ„¤μ • λ©”μ„λ“μ—μ„ μ΄ ν•„λ“λ¥Ό μ‚¬μ©ν•΄μ„ ν•„μ”ν• λΉμ„ μ£Όμ…ν•λ©΄ λλ‹¤. 
μ¤ν”„λ§ μ»¨ν…μ΄λ„λ” μ„¤μ • ν΄λμ¤μ—μ„ μ‚¬μ©ν• @Autowiredμ— λ€ν•΄μ„λ„ μλ™ μ£Όμ…μ„ μ²λ¦¬ν•λ‹¤. μ¤ν”„λ§μ€ @Configuration μ–΄λ…Έν…μ΄μ…μ΄ λ¶™μ€ μ„¤μ • ν΄λμ¤λ¥Ό λ‚΄λ¶€μ μΌλ΅ μ¤ν”„λ§ λΉμ— λ“±λ΅ν•λ‹¤.

#### μ„¤μ • νμΌ1 AppConf1 class
```java
@Configuration
public class AppConf1{
	@Bean
    public MemberDao memberDao(){
    	return new MemberDao();
    }
    @Bean
    public MemberPrinter memberPrinter(){
    	return new MemberPrinter();
    }
}
```
μ¦‰, μ»¨ν…μ΄λ„λ” AppConf2 κ°μ²΄λ¥Ό λΉμΌλ΅ λ“±λ΅ν•κ³  @Autowired μ–΄λ…Έν…μ΄μ…μ΄ λ¶™μ€ λ‘ ν•„λ“(memberDao, memberPrinter)μ— ν•΄λ‹Ή νƒ€μ…μ λΉ κ°μ²΄λ¥Ό μ£Όμ…ν•λ‹¤.
#### μ„¤μ • νμΌ2 AppConf2 class
```java
@Configuration
public class AppConf2{
	@Autowired
    private MemberDao memberDao;
    @Autowired
    private MemberPrinter memberPrinter;
    
    @Bean
    public MemberRegisterService memberRegSvc(){
    	return new MemberRegisterService(memberDao());
    }
    @Bean
    public ChangePasswordService changePwdSvc(){
		ChangePasswordService pwdSvc = new ChangePasswordService();
        pwdSvc.setMemberDao(memberDao());
        return pwdSvc;
	}
    ...
}
```
μ„¤μ • ν΄λμ¤κ°€ λ‘ κ° μ΄μƒμ΄μ–΄λ„ μ¤ν”„λ§ μ»¨ν…μ΄λ„λ¥Ό μƒμ„±ν•λ” μ½”λ“λ” μ•„λκ³Ό κ°™μ΄ νλΌλ―Έν„°λ΅ μ„¤μ • ν΄λμ¤λ¥Ό μ¶”κ°€λ΅ μ „λ‹¬ν•λ©΄ λλ‹¤.
```java
ctx = new AnnotationConfigApplicationContext(AppConf1.class, AppConf2.class);
```

### @Import Annotation
λ‘ κ° μ΄μƒμ μ„¤μ • νμΌμ„ μ‚¬μ©ν•λ” λ λ‹¤λ¥Έ λ°©λ²•μ€ @Import μ–΄λ…Έν…μ΄μ…μ„ μ‚¬μ©ν•λ” κ²ƒμ΄λ‹¤. 
AppConfImport μ„¤μ • ν΄λμ¤λ¥Ό μ‚¬μ©ν•λ©΄ @Import μ–΄λ…Έν…μ΄μ…μΌλ΅ μ§€μ •ν• AppConf2 μ„¤μ • ν΄λμ¤λ„ ν•¨κ» μ‚¬μ©ν•κΈ° λ•λ¬Έμ— AppConf2 μ„¤μ • ν΄λμ¤λ¥Ό μ§€μ •ν•  ν•„μ”κ°€ μ—†λ‹¤.

#### μ„¤μ • ν΄λμ¤ AppConfImport class
```java
@Configuration
@Import(AppConf2.class)
public class AppConfImport{
	@Bean
    public MemberDao memberDao(){
    	rerturn new MemberDao();
    }
    @Bean
    public MemberPrinter memberPrinter(){
		return new MemberPrinter();
	}
}
```
AppConfImport ν΄λμ¤λ§ μ‚¬μ©ν•λ©΄ AppConf2 ν΄λμ¤μ μ„¤μ •λ„ ν•¨κ» μ‚¬μ©ν•΄μ„ μ»¨ν…μ΄λ„λ¥Ό μ΄κΈ°ν™”ν•λ‹¤.
#### MainForImport class
```java
public class MainForSpring{
	private static ApplicationCOntext ctx = null;
    public static void main(String[] args) throws IOExceprion{
    	ctx=new AnnotationConfigApplicationContext(AppConfImport.class);
        ...
    }
}
```
@Import μ–΄λ…Έν…μ΄μ…μ€ λ°°μ—΄μ„ μ΄μ©ν•΄μ„ λ‘ κ° μ΄μƒμ μ„¤μ • ν΄λμ¤λ„ μ§€μ •ν•  μ μλ‹¤.
```java
@Configuration
@Import({AppConfig1.class, AppConf2.class})
public class AppConfImport{
	...
}
```